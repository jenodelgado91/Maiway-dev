{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\maipc3\\\\Desktop\\\\branchfor2live\\\\maiway-dev\\\\src\\\\components\\\\Places\\\\index.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { CardContent, Button, Paper, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\nimport PlacesPopup from \"./PlacesPopup\";\nimport { searchPlacesRequest, updatePage } from \"../../store/placesReducer\";\nimport { searchCmmnArrayRequest, getCmmnArrayRequest } from \"../../store/fsCmmnArrayReducer\";\nimport { deleteRequest } from \"../../store/cudReducer\";\nimport { DraggableDialog, CmmnSelect, DataList2 } from \"../commons\";\nimport { useTranslation } from \"react-i18next\";\nimport ExcelReader from \"../Upload/ExcelReader\";\nconst columns = [{\n  id: \"no\",\n  label: \"No\",\n  minWidth: 50,\n  align: \"center\"\n}, {\n  id: \"en_name\",\n  label: \"Name\",\n  minWidth: 100,\n  maxWidth: 150,\n  align: \"left\"\n}, {\n  id: \"country_code\",\n  label: \"Country\",\n  minWidth: 100,\n  align: \"center\",\n  type: \"select\",\n  selectList: \"country\",\n  selectCdNm: [\"Ctry_Code\", \"Ctry_Name\"]\n}, {\n  id: \"category\",\n  label: \"Category\",\n  minWidth: 100,\n  maxWidth: 150,\n  align: \"left\",\n  type: \"select\",\n  selectList: \"category\",\n  selectCdNm: [\"category_cd\", \"category_nm\"]\n}, {\n  id: \"address\",\n  label: \"Address\",\n  minWidth: 170,\n  maxWidth: 200\n}, {\n  id: \"en_descr\",\n  label: \"Details\",\n  minWidth: 170,\n  maxWidth: 200\n}];\nconst useStyles = makeStyles(theme => ({\n  seeMore: {\n    marginTop: theme.spacing(3)\n  },\n  top: {\n    display: \"flex\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  },\n  bottom: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  },\n  textFiled: {\n    // width: \"25vw\",\n    minWidth: \"10vw\",\n    margin: \"0 1vw 1vh 0\"\n  },\n  customButton: {\n    width: \"10vw\",\n    minWidth: \"100px\",\n    height: \"5vh\"\n  },\n  customButton2: {\n    width: \"10vw\",\n    minWidth: \"100px\",\n    height: \"5vh\",\n    marginLeft: theme.spacing(1)\n  },\n  container: {\n    maxHeight: 550\n  },\n  selected: {},\n  progressPosition: {\n    display: \"absolute\",\n    top: \"50%\",\n    left: \"50%\"\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 160\n  }\n}));\n/**\n * Status code\n */\n\nconst StatusList = () => [{\n  key: 0,\n  value: 0,\n  text: \"Inactive\"\n}, {\n  key: 1,\n  value: 1,\n  text: \"Active\"\n}];\n\nlet page = 0;\n\nfunction Places({\n  placesList,\n  searchPlacesRequest,\n  deleteRequest,\n  placesStatus,\n  cudStatus,\n  updatePage,\n  searchCmmnArrayRequest,\n  getCmmnArrayRequest,\n  commonList,\n  callLoading\n}) {\n  const rowsPerPage = 10;\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const [open, setOpen] = useState(false);\n  const [open2, setOpen2] = useState(false);\n  const [selectedID, setSelectedID] = useState(null);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [country, setCountry] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n\n  const handleCountryChange = ev => {\n    setCountry(ev.target.value);\n  };\n\n  const handleStatusChange = ev => {\n    setStatus(ev.target.value);\n  };\n\n  const handleCategoryChange = ev => {\n    setCategory(ev.target.value);\n  };\n  /**\n   * loading true or false\n   */\n\n\n  useEffect(() => {\n    // console.log(placesStatus, cudStatus);\n    if (placesStatus === \"WAITING\" || cudStatus === \"WAITING\") {\n      callLoading(\"WAITING\");\n    } else if (placesStatus === \"SUCCESS\" && (cudStatus === \"SUCCESS\" || cudStatus === \"\")) {\n      callLoading(\"SUCCESS\");\n    }\n  }, [placesStatus, cudStatus]);\n  /**\n   * 공통 collection 조회\n   * country, category\n   */\n\n  useEffect(() => {\n    // const searchCommon = async () => {\n    //   await searchCmmnArrayRequest([\n    //     { doc: \"country\", orderBy: \"Ctry_Name\" },\n    //     { doc: \"category\", orderBy: \"category_nm\" },\n    //   ]);\n    // };\n    // searchCommon();\n    getCmmnArrayRequest();\n  }, []);\n\n  const searchParams = (country, startPage) => {\n    const pCategory = category === \"All\" ? \"\" : category;\n    const pStatus = status === \"All\" ? \"\" : status;\n    return {\n      col: \"places\",\n      where: [{\n        country_code: country\n      }, {\n        category: pCategory\n      }, {\n        status: pStatus\n      }],\n      startPage,\n      maxPage: rowsPerPage,\n      lastRow: placesList && placesList[placesList.length - 1]\n    };\n  };\n  /**\n   * onLoad Search\n   * Common Code -> search places\n   */\n\n\n  useEffect(() => {\n    const openSearch = async () => {\n      setCountry(() => commonList[\"country\"][0].Ctry_Code);\n      setCategory(\"All\");\n      setStatus(\"All\");\n\n      if (commonList[\"country\"].length > 0) {\n        page = 0;\n        await searchPlacesRequest(searchParams(commonList[\"country\"][0].Ctry_Code, 0));\n      }\n    };\n\n    commonList && openSearch();\n  }, [commonList]); // useEffect(() => {\n  //   const searchP = async () =>\n  //     await searchPlaces(rowsPerPage * page + 1, rowsPerPage);\n  //   commonList && country !== \"\" && searchP();\n  // }, [page, rowsPerPage]);\n  // const searchPlaces = async (startPage: number, maxPage: number) => {\n  //   const params = {\n  //     ...searchParams(country),\n  //     startPage: startPage,\n  //     maxPage: maxPage,\n  //   };\n  //   await searchPlacesRequest(params);\n  // };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleNew = () => {\n    setSelectedID(null);\n    handleOpen();\n  };\n\n  const handleClose = params => {\n    (params === null || params === void 0 ? void 0 : params.key) && updatePage(params);\n    setOpen(false);\n  };\n\n  const searchClick = () => {\n    page = 0;\n    return searchPlacesRequest(searchParams(country, 0));\n  };\n\n  const searchNextClick = () => {\n    page++;\n    return searchPlacesRequest(searchParams(country, page));\n  };\n  /**\n   * modify\n   */\n\n\n  const handleModify = () => {\n    selectedID && handleOpen();\n  };\n  /**\n   * delete\n   */\n\n\n  const handleDelete = async () => {\n    setOpenDialog(false);\n    selectedID && (await deleteRequest(\"places\", selectedID));\n    await searchPlacesRequest(searchParams(country, 0));\n  };\n  /**\n   * confirm 팝업 open\n   */\n\n\n  const handleClickOpenDialog = () => {\n    selectedID && setOpenDialog(true);\n  };\n  /**\n   * confirm 팝업 close\n   */\n\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n  };\n\n  const handleClose2 = params => {\n    (params === null || params === void 0 ? void 0 : params.key) && updatePage(params);\n    setOpen2(false);\n  };\n\n  const handleRowClick = row => {\n    // console.log(row);\n    setSelectedID(row.key);\n  };\n\n  const handleClickOpen = () => {\n    setOpen2(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.top,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CmmnSelect, {\n    label: \"Country\",\n    value: country,\n    itemList: commonList && commonList[\"country\"],\n    keyValue: {\n      key: \"Ctry_Code\",\n      value: \"Ctry_Name\"\n    },\n    onChange: handleCountryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CmmnSelect, {\n    label: \"Category\",\n    value: category || \"All\",\n    firstItem: \"All\",\n    itemList: commonList && commonList[\"category\"],\n    keyValue: {\n      key: \"category_cd\",\n      value: \"category_nm\"\n    },\n    onChange: handleCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CmmnSelect, {\n    label: \"Status\",\n    value: status || \"All\",\n    firstItem: \"All\",\n    itemList: StatusList(),\n    keyValue: {\n      key: \"value\",\n      value: \"text\"\n    },\n    onChange: handleStatusChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.customButton,\n    onClick: searchClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, t(\"Search\")))), /*#__PURE__*/React.createElement(DataList2, {\n    columns: columns.map(column => ({ ...column,\n      label: t(column.label)\n    })),\n    rows: placesList || [],\n    rowClick: handleRowClick,\n    selectedID: selectedID,\n    maxHeight: \"570\",\n    page: page,\n    rowsPerPage: rowsPerPage,\n    commonList: commonList,\n    searchNextClick: searchNextClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.bottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.customButton2,\n    onClick: handleNew,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 13\n    }\n  }, t(\"New\")), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.customButton2,\n    onClick: handleModify,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }\n  }, t(\"Modify\")), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.customButton2,\n    onClick: handleClickOpenDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }, t(\"Delete\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleClickOpen,\n    className: classes.customButton2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 15\n    }\n  }, t(\"Upload\")), /*#__PURE__*/React.createElement(Dialog, {\n    open: open2,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 17\n    }\n  }, \"Upload excel file only.\", \" \"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ExcelReader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: handleClose2,\n    color: \"secondary\",\n    style: {\n      width: 105,\n      margin: 14\n    },\n    className: classes.customButton2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 19\n    }\n  }, t(\"Cancel\")))))))), /*#__PURE__*/React.createElement(PlacesPopup, {\n    open: open,\n    handleClose: handleClose,\n    selectedID: selectedID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DraggableDialog, {\n    handleCloseDialog: handleCloseDialog,\n    openDialog: openDialog,\n    handleYesDialog: handleDelete,\n    alertTitle: \"Delete\",\n    alertMsg: \"Delete?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction mapStateToProps(state) {\n  var _state$placesReducer, _state$placesReducer2, _state$cudReducer;\n\n  // console.log(state.fsCmmnArrayReducer);\n  const commonList = state.fsCmmnArrayReducer.status === \"SUCCESS\" ? state.fsCmmnArrayReducer.rowData : null;\n  return {\n    placesList: (_state$placesReducer = state.placesReducer) === null || _state$placesReducer === void 0 ? void 0 : _state$placesReducer.rowData,\n    placesStatus: (_state$placesReducer2 = state.placesReducer) === null || _state$placesReducer2 === void 0 ? void 0 : _state$placesReducer2.status,\n    cudStatus: (_state$cudReducer = state.cudReducer) === null || _state$cudReducer === void 0 ? void 0 : _state$cudReducer.status,\n    commonList\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    searchPlacesRequest: param => dispatch(searchPlacesRequest(param)),\n    updatePage: param => dispatch(updatePage(param)),\n    searchCmmnArrayRequest: param => dispatch(searchCmmnArrayRequest(param)),\n    getCmmnArrayRequest: () => dispatch(getCmmnArrayRequest()),\n    deleteRequest: (col, doc) => dispatch(deleteRequest(col, doc))\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Places);","map":{"version":3,"sources":["C:/Users/maipc3/Desktop/branchfor2live/maiway-dev/src/components/Places/index.tsx"],"names":["React","useState","useEffect","connect","makeStyles","CardContent","Button","Paper","Dialog","DialogTitle","DialogContent","DialogActions","PlacesPopup","searchPlacesRequest","updatePage","searchCmmnArrayRequest","getCmmnArrayRequest","deleteRequest","DraggableDialog","CmmnSelect","DataList2","useTranslation","ExcelReader","columns","id","label","minWidth","align","maxWidth","type","selectList","selectCdNm","useStyles","theme","seeMore","marginTop","spacing","top","display","justifyContent","alignItems","bottom","textFiled","margin","customButton","width","height","customButton2","marginLeft","container","maxHeight","selected","progressPosition","left","formControl","StatusList","key","value","text","page","Places","placesList","placesStatus","cudStatus","commonList","callLoading","rowsPerPage","classes","t","open","setOpen","open2","setOpen2","selectedID","setSelectedID","openDialog","setOpenDialog","country","setCountry","status","setStatus","category","setCategory","handleCountryChange","ev","target","handleStatusChange","handleCategoryChange","searchParams","startPage","pCategory","pStatus","col","where","country_code","maxPage","lastRow","length","openSearch","Ctry_Code","handleOpen","handleNew","handleClose","params","searchClick","searchNextClick","handleModify","handleDelete","handleClickOpenDialog","handleCloseDialog","handleClose2","handleRowClick","row","handleClickOpen","map","column","mapStateToProps","state","fsCmmnArrayReducer","rowData","placesReducer","cudReducer","mapDispatchToProps","dispatch","param","doc"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  CardContent,\n  Button,\n  Paper,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport PlacesPopup from \"./PlacesPopup\";\nimport { searchPlacesRequest, updatePage } from \"../../store/placesReducer\";\nimport {\n  searchCmmnArrayRequest,\n  getCmmnArrayRequest,\n} from \"../../store/fsCmmnArrayReducer\";\nimport { deleteRequest } from \"../../store/cudReducer\";\nimport { DraggableDialog, DataList, CmmnSelect, DataList2 } from \"../commons\";\nimport { useTranslation } from \"react-i18next\";\nimport ExcelReader from \"../Upload/ExcelReader\";\n\ninterface Column {\n  id: \"no\" | \"en_name\" | \"country_code\" | \"category\" | \"address\" | \"en_descr\";\n  label: string;\n  minWidth?: number;\n  maxWidth?: number;\n  align?: \"right\" | \"center\" | \"left\";\n  format?: (value: number) => string;\n  type?: \"select\" | \"text\";\n  selectList?: string;\n  selectCdNm?: string[];\n}\n\nconst columns: Column[] = [\n  { id: \"no\", label: \"No\", minWidth: 50, align: \"center\" },\n  { id: \"en_name\", label: \"Name\", minWidth: 100, maxWidth: 150, align: \"left\" },\n  {\n    id: \"country_code\",\n    label: \"Country\",\n    minWidth: 100,\n    align: \"center\",\n    type: \"select\",\n    selectList: \"country\",\n    selectCdNm: [\"Ctry_Code\", \"Ctry_Name\"],\n  },\n  {\n    id: \"category\",\n    label: \"Category\",\n    minWidth: 100,\n    maxWidth: 150,\n    align: \"left\",\n    type: \"select\",\n    selectList: \"category\",\n    selectCdNm: [\"category_cd\", \"category_nm\"],\n  },\n  { id: \"address\", label: \"Address\", minWidth: 170, maxWidth: 200 },\n  { id: \"en_descr\", label: \"Details\", minWidth: 170, maxWidth: 200 },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  seeMore: {\n    marginTop: theme.spacing(3),\n  },\n  top: {\n    display: \"flex\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n  },\n  bottom: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n  },\n  textFiled: {\n    // width: \"25vw\",\n    minWidth: \"10vw\",\n    margin: \"0 1vw 1vh 0\",\n  },\n  customButton: {\n    width: \"10vw\",\n    minWidth: \"100px\",\n    height: \"5vh\",\n  },\n  customButton2: {\n    width: \"10vw\",\n    minWidth: \"100px\",\n    height: \"5vh\",\n    marginLeft: theme.spacing(1),\n  },\n  container: {\n    maxHeight: 550,\n  },\n  selected: {},\n  progressPosition: {\n    display: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 160,\n  },\n}));\n\n/**\n * Status code\n */\nconst StatusList = () => [\n  { key: 0, value: 0, text: \"Inactive\" },\n  { key: 1, value: 1, text: \"Active\" },\n];\nlet page = 0;\nfunction Places({\n  placesList,\n  searchPlacesRequest,\n  deleteRequest,\n  placesStatus,\n  cudStatus,\n  updatePage,\n  searchCmmnArrayRequest,\n  getCmmnArrayRequest,\n  commonList,\n  callLoading,\n}: any) {\n  const rowsPerPage = 10;\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const [open, setOpen] = useState(false);\n  const [open2, setOpen2] = useState(false);\n  const [selectedID, setSelectedID] = useState(null);\n\n  const [openDialog, setOpenDialog] = useState(false);\n\n  const [country, setCountry] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n\n  const handleCountryChange = (ev: React.ChangeEvent<{ value: unknown }>) => {\n    setCountry(ev.target.value as string);\n  };\n  const handleStatusChange = (ev: React.ChangeEvent<{ value: unknown }>) => {\n    setStatus(ev.target.value as string);\n  };\n  const handleCategoryChange = (ev: React.ChangeEvent<{ value: unknown }>) => {\n    setCategory(ev.target.value as string);\n  };\n\n  /**\n   * loading true or false\n   */\n  useEffect(() => {\n    // console.log(placesStatus, cudStatus);\n    if (placesStatus === \"WAITING\" || cudStatus === \"WAITING\") {\n      callLoading(\"WAITING\");\n    } else if (\n      placesStatus === \"SUCCESS\" &&\n      (cudStatus === \"SUCCESS\" || cudStatus === \"\")\n    ) {\n      callLoading(\"SUCCESS\");\n    }\n  }, [placesStatus, cudStatus]);\n\n  /**\n   * 공통 collection 조회\n   * country, category\n   */\n  useEffect(() => {\n    // const searchCommon = async () => {\n    //   await searchCmmnArrayRequest([\n    //     { doc: \"country\", orderBy: \"Ctry_Name\" },\n    //     { doc: \"category\", orderBy: \"category_nm\" },\n    //   ]);\n    // };\n    // searchCommon();\n    getCmmnArrayRequest();\n  }, []);\n\n  const searchParams = (country: any, startPage: number) => {\n    const pCategory = category === \"All\" ? \"\" : category;\n    const pStatus = status === \"All\" ? \"\" : status;\n    return {\n      col: \"places\",\n      where: [\n        { country_code: country },\n        { category: pCategory },\n        { status: pStatus },\n      ],\n      startPage,\n      maxPage: rowsPerPage,\n      lastRow: placesList && placesList[placesList.length - 1],\n    };\n  };\n\n  /**\n   * onLoad Search\n   * Common Code -> search places\n   */\n  useEffect(() => {\n    const openSearch = async () => {\n      setCountry(() => commonList[\"country\"][0].Ctry_Code);\n      setCategory(\"All\");\n      setStatus(\"All\");\n      if (commonList[\"country\"].length > 0) {\n        page = 0;\n        await searchPlacesRequest(\n          searchParams(commonList[\"country\"][0].Ctry_Code, 0)\n        );\n      }\n    };\n    commonList && openSearch();\n  }, [commonList]);\n\n  // useEffect(() => {\n  //   const searchP = async () =>\n  //     await searchPlaces(rowsPerPage * page + 1, rowsPerPage);\n\n  //   commonList && country !== \"\" && searchP();\n  // }, [page, rowsPerPage]);\n\n  // const searchPlaces = async (startPage: number, maxPage: number) => {\n  //   const params = {\n  //     ...searchParams(country),\n  //     startPage: startPage,\n  //     maxPage: maxPage,\n  //   };\n  //   await searchPlacesRequest(params);\n  // };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleNew = () => {\n    setSelectedID(null);\n    handleOpen();\n  };\n  const handleClose = (params: any) => {\n    params?.key && updatePage(params);\n    setOpen(false);\n  };\n\n  const searchClick = () => {\n    page = 0;\n    return searchPlacesRequest(searchParams(country, 0));\n  };\n\n  const searchNextClick = () => {\n    page++;\n    return searchPlacesRequest(searchParams(country, page));\n  };\n\n  /**\n   * modify\n   */\n  const handleModify = () => {\n    selectedID && handleOpen();\n  };\n\n  /**\n   * delete\n   */\n  const handleDelete = async () => {\n    setOpenDialog(false);\n    selectedID && (await deleteRequest(\"places\", selectedID));\n\n    await searchPlacesRequest(searchParams(country, 0));\n  };\n\n  /**\n   * confirm 팝업 open\n   */\n  const handleClickOpenDialog = () => {\n    selectedID && setOpenDialog(true);\n  };\n  /**\n   * confirm 팝업 close\n   */\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n  };\n  const handleClose2 = (params: any) => {\n    params?.key && updatePage(params);\n    setOpen2(false);\n  };\n  const handleRowClick = (row: any) => {\n    // console.log(row);\n    setSelectedID(row.key);\n  };\n  const handleClickOpen = () => {\n    setOpen2(true);\n  };\n  return (\n    <>\n      <Paper>\n        <CardContent>\n          <div className={classes.top}>\n            <CmmnSelect\n              label=\"Country\"\n              value={country}\n              itemList={commonList && commonList[\"country\"]}\n              keyValue={{ key: \"Ctry_Code\", value: \"Ctry_Name\" }}\n              onChange={handleCountryChange}\n            />\n            <CmmnSelect\n              label=\"Category\"\n              value={category || \"All\"}\n              firstItem=\"All\"\n              itemList={commonList && commonList[\"category\"]}\n              keyValue={{ key: \"category_cd\", value: \"category_nm\" }}\n              onChange={handleCategoryChange}\n            />\n            <CmmnSelect\n              label=\"Status\"\n              value={status || \"All\"}\n              firstItem=\"All\"\n              itemList={StatusList()}\n              keyValue={{ key: \"value\", value: \"text\" }}\n              onChange={handleStatusChange}\n            />\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.customButton}\n              onClick={searchClick}\n            >\n              {t(\"Search\")}\n            </Button>\n          </div>\n        </CardContent>\n        <DataList2\n          columns={columns.map((column) => ({\n            ...column,\n            label: t(column.label),\n          }))}\n          rows={placesList || []}\n          rowClick={handleRowClick}\n          selectedID={selectedID}\n          maxHeight={\"570\"}\n          page={page}\n          rowsPerPage={rowsPerPage}\n          commonList={commonList}\n          searchNextClick={searchNextClick}\n        />\n        {/* <DataList\n          columns={columns.map((column) => ({\n            ...column,\n            label: t(column.label),\n          }))}\n          rows={(placesStatus === \"SUCCESS\" && placesList) || []}\n          rowClick={handleRowClick}\n          selectedID={selectedID}\n          maxHeight={\"520\"}\n          search={searchPlaces}\n          page={page}\n          rowsPerPage={rowsPerPage}\n          setPage={setPage}\n          setRowsPerPage={setRowsPerPage}\n          commonList={commonList}\n        /> */}\n        <CardContent>\n          <div className={classes.bottom}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.customButton2}\n              onClick={handleNew}\n            >\n              {t(\"New\")}\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.customButton2}\n              onClick={handleModify}\n            >\n              {t(\"Modify\")}\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.customButton2}\n              onClick={handleClickOpenDialog}\n            >\n              {t(\"Delete\")}\n            </Button>\n            <div>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleClickOpen}\n                className={classes.customButton2}\n              >\n                {t(\"Upload\")}\n              </Button>\n              <Dialog\n                open={open2}\n                onClose={handleClose}\n                aria-labelledby=\"form-dialog-title\"\n              >\n                <DialogTitle id=\"form-dialog-title\">\n                  Upload excel file only.{\" \"}\n                </DialogTitle>\n                <DialogContent>\n                  <div>\n                    <ExcelReader />\n                  </div>\n                </DialogContent>\n                <DialogActions>\n                  {/* <Button \n                    variant=\"contained\" \n                    type=\"submit\" \n                    color=\"primary\"\n                    className={classes.customButton2}\n                    value=\"Process Triggers\"\n                  >\n                    {t(\"Save\")}  \n                  </Button> */}\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleClose2}\n                    color=\"secondary\"\n                    style={{ width: 105, margin: 14 }}\n                    className={classes.customButton2}\n                  >\n                    {t(\"Cancel\")}\n                  </Button>\n                </DialogActions>\n              </Dialog>\n            </div>\n            {/* <div>\n              <ExcelReader/>\n            </div> */}\n          </div>\n        </CardContent>\n      </Paper>\n\n      <PlacesPopup\n        open={open}\n        handleClose={handleClose}\n        selectedID={selectedID}\n      />\n      <DraggableDialog\n        handleCloseDialog={handleCloseDialog}\n        openDialog={openDialog}\n        handleYesDialog={handleDelete}\n        alertTitle={\"Delete\"}\n        alertMsg={\"Delete?\"}\n      />\n    </>\n  );\n}\n\nfunction mapStateToProps(state: any) {\n  // console.log(state.fsCmmnArrayReducer);\n  const commonList =\n    state.fsCmmnArrayReducer.status === \"SUCCESS\"\n      ? state.fsCmmnArrayReducer.rowData\n      : null;\n  return {\n    placesList: state.placesReducer?.rowData,\n    placesStatus: state.placesReducer?.status,\n    cudStatus: state.cudReducer?.status,\n    commonList,\n  };\n}\nfunction mapDispatchToProps(dispatch: any) {\n  return {\n    searchPlacesRequest: (param: any) => dispatch(searchPlacesRequest(param)),\n    updatePage: (param: any) => dispatch(updatePage(param)),\n    searchCmmnArrayRequest: (param: any) =>\n      dispatch(searchCmmnArrayRequest(param)),\n    getCmmnArrayRequest: () => dispatch(getCmmnArrayRequest()),\n    deleteRequest: (col: string, doc: string) =>\n      dispatch(deleteRequest(col, doc)),\n  };\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Places);\n"]},"metadata":{},"sourceType":"module"}